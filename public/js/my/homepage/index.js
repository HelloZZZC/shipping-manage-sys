!function(e){var t={};function i(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/",i(i.s=11)}({11:function(e,t,i){e.exports=i("hmDL")},"Z3+9":function(e,t,i){"use strict";function n(e,t){$.notify({message:t},{element:"body",type:e,allow_dismiss:!1,placement:{from:"top",align:"center"},offset:10,spacing:10,z_index:1051,delay:1e3,timer:1e3,animate:{enter:"animated fadeInDown",exit:"animated fadeOutUp"}})}i.d(t,"a",function(){return n})},hmDL:function(e,t,i){"use strict";i.r(t);var n=i("Z3+9");function a(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initObject(),this.initDatePicker(),this.initValidator(),this.initUploader(),this.initEvent()}var t,i,r;return t=e,(i=[{key:"initObject",value:function(){this.$form=$("#my-profile-form"),this.$saveBtn=$("#save-btn"),this.$birthdayInput=$("#birthday"),this.$emailInput=$("#email"),this.$mobileInput=$("#mobile"),this.$uploadBtn=$(".js-avatar-uploader"),this.$fileInput=$(".js-avatar"),this.$uploadContainer=$(".js-upload-container"),this.$modal=$("#static-modal")}},{key:"initUploader",value:function(){var e=this,t=this.$uploadContainer.data("url");this.$uploadContainer.dmUploader({url:t,multiple:!1,headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},allowedTypes:"image/*",extFilter:["jpg","jpeg","png","gif"],maxFileSize:2097152,onUploadError:function(e,t,i,a){Object(n.a)("danger","上传图片失败")},onUploadSuccess:function(t,i){var a=JSON.stringify(i),r=JSON.parse(a);if(r.code)Object(n.a)("danger","服务处理上传图片失败");else{var o=r.data.goto_url,l=r.data.avatar_url;$.get(o,{avatar_url:l},function(t){e.$modal.html(t),e.$modal.modal("show")})}}})}},{key:"initValidator",value:function(){jQuery.validator.addMethod("mobile",function(e,t){return this.optional(t)||/^1\d{10}$/.test(e)},"请输入正确的手机号格式"),jQuery.validator.addMethod("nickname",function(e,t){return this.optional(t)||/^[a-zA-Z0-9]+$/i.test(e)},"账号必须是英文字母、数字组成"),this.$form.validate({rules:{mobile:{required:!0,remote:{url:this.$mobileInput.data("url"),type:"get",data:{exclude:this.$mobileInput.val()}},mobile:!0},email:{required:!0,remote:{url:this.$emailInput.data("url"),type:"get",data:{exclude:this.$emailInput.val()}},email:!0},age:{digits:!0,min:0,max:100},address:{maxlength:300},about:{maxlength:500}},messages:{verified_mobile:{required:"请输入手机号",mobile:"请输入正确格式的手机号",remote:"该手机号已被占用，请换一个手机号输入"},email:{required:"请输入邮箱",email:"请输入正确格式的邮箱",remote:"该邮箱已被占用，请换一个邮箱输入"},age:{digits:"年龄必须为整数",min:"年龄最小值为0",max:"年龄最大值为100"},address:{maxlength:"地址的最大长度为300字符（一个汉子一个字符）"},about:{maxlength:"About ME的最大长度为500字符（一个汉子一个字符）"}},errorClass:"invalid-tooltip unset-top",errorElement:"span",highlight:function(e,t){$(e).removeClass(t)}})}},{key:"initEvent",value:function(){var e=this;this.$saveBtn.click(function(){e.$form.valid()&&$.post(e.$form.attr("action"),e.$form.serialize(),function(e){e.code?Object(n.a)("danger","主页数据保存失败，请联系网站管理员"):(Object(n.a)("success","主页数据保存成功"),setTimeout("window.location.reload();",1e3))})}),this.$uploadBtn.click(function(){e.$fileInput.click()})}},{key:"initDatePicker",value:function(){this.$birthdayInput.datepicker({format:"mm-dd",autoclose:!0,maxViewMode:"months",startView:"months"})}}])&&a(t.prototype,i),r&&a(t,r),e}())}});